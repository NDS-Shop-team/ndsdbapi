<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NDS DB API Documentation</title>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>NDS DB API Documentation</h1>

        <button id="theme-toggle" class="theme-toggle" title="Toggle theme">
          <svg
            class="icon-moon"
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="currentColor"
          >
            <path
              d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"
            />
          </svg>
          <svg
            class="icon-sun"
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="currentColor"
          >
            <path
              d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"
            />
          </svg>
        </button>
      </header>

      <nav class="nav-tabs">
        <button class="nav-tab active" data-page="api-docs-page">
          API Documentation
        </button>
        <button class="nav-tab" data-page="game-browser-page">
          Game Database
        </button>
      </nav>

      <section id="game-browser-page" class="page-content">
        <input
          type="text"
          id="search-bar"
          placeholder="Search by Serial or Name..."
        />
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Icon</th>
                <th>Serial</th>
                <th>Name</th>
                <th>Region</th>
                <th>Details</th>
              </tr>
            </thead>
            <tbody id="game-table-body">
              </tbody>
          </table>
        </div>
      </section>

      <section id="api-docs-page" class="page-content active">
        <p style="margin-top: 0">
          <strong>API Version:</strong> <span id="api-version">Loading...</span>
        </p>

        <h2>Database Structure</h2>
        <p>
          The API serves content from a structured database located at
          <code>public/db/nds/</code>
        </p>
        <h2>Categories</h2>
        <ul>
          <li>base - Base game content</li>
        </ul>

        <h2>API Endpoints</h2>

        <div id="metadata" class="endpoint-group">
          <h3>Metadata Endpoints</h3>
          <p>
            Endpoints for retrieving title metadata and specific metadata fields.
          </p>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/metadata/:serial</code>
            </summary>
            <div class="endpoint-details">
              <p>
                Retrieve title metadata in JSON format along with all available
                media URLs
              </p>
              <div class="parameters">
                <strong>Parameters:</strong>
                <div class="parameter">
                  <code>serial</code> - Game Serial (e.g., NTR-ADME-USA)
                </div>
              </div>
              <div class="response">
                <strong>Response:</strong> JSON object containing title metadata
                and media URLs
              </div>
            </div>
          </details>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/metadata/:serial/meta/:meta</code>
            </summary>
            <div class="endpoint-details">
              <p>Retrieve a specific metadata field</p>
              <div class="parameters">
                <strong>Parameters:</strong>
                <div class="parameter">
                  <code>serial</code> - Game Serial (e.g., NTR-ADME-USA)
                </div>
                <div class="parameter">
                  <code>meta</code> - Metadata field name (e.g., name,
                  description, release_date)
                </div>
              </div>
              <div class="response">
                <strong>Response:</strong> Single metadata value
              </div>
            </div>
          </details>
        </div>

        <div id="media" class="endpoint-group">
          <h3>Media Asset Endpoints</h3>
          <p>
            Endpoints for accessing title banners, icons, and other media assets.
          </p>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/images/:serial/banner</code>
            </summary>
            <div class="endpoint-details">
              <p>Get the title's banner image</p>
            </div>
          </details>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/images/:serial/icon</code>
            </summary>
            <div class="endpoint-details">
              <p>Get the title's icon image</p>
            </div>
          </details>
                    <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/images/:serial/boxart</code>
            </summary>
            <div class="endpoint-details">
              <p>Get the title's boxart image</p>
            </div>
          </details>
        </div>

        <div id="screenshots" class="endpoint-group">
          <h3>Screenshot Endpoints</h3>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/screenshots/:serial/screen/:num</code>
            </summary>
            <div class="endpoint-details">
              <p>Get a specific compiled screenshot</p>
            </div>
          </details>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/screenshots/:serial/screen_u</code>
            </summary>
            <div class="endpoint-details">
              <p>
                Get a list of all available uncompiled screenshots (upper and
                lower screens)
              </p>
            </div>
          </details>
        </div>

        <div id="system" class="endpoint-group">
          <h3>System Information Endpoints</h3>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/uptimes/uptime</code>
            </summary>
            <div class="endpoint-details">
              <p>Get server uptime information</p>
            </div>
          </details>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/stats/stats</code>
            </summary>
            <div class="endpoint-details">
              <p>Get statistics about titles in each category</p>
            </div>
          </details>
          <details>
            <summary class="endpoint">
              <span class="method get">GET</span>
              <code>/api/v1/stats/category/:category</code>
            </summary>
            <div class="endpoint-details">
              <p>
                List all Serials in a specific category (e.g., <code>base</code>)
              </p>
            </div>
          </details>
        </div>
      </section>
    </div>

    <div id="game-modal" class="modal">
      <div class="modal-content">
        <span class="modal-close" id="modal-close-button">&times;</span>
        <div id="modal-body-content">
          <p>Loading details...</p>
        </div>
      </div>
    </div>
  </body>
</html>